<template name="profileTemplate">
    {{#contentFor "headerButtonLeft"}}
        {{>ionNavBackButton path="index"}}
    {{/contentFor}}

    {{#contentFor "headerTitle"}}
        <h1 class="title">Profile</h1>
    {{/contentFor}}

    {{#ionView}}
        {{#if currentUser}}
            {{#ionContent class="genericClass"}}

                <div class="list card">
                    <div class="item" style="text-align:center">
                        <a href="{{currentUser.profile.avatarUrl}}" class="popup-image">
                            <img src="{{currentUser.profile.avatarUrl}}" width="128" height="128" class="rounded">
                        </a>
                        <br>
                        <a href="/changeAvatar" class="button button-small button-icon icon ion-camera"></a>
                    </div>

                    <div class="item tabs tabs-secondary tabs-icon-left">
                        <a class="tab-item" href="#">
                            <i class="icon ion-thumbsup"></i> Work
                        </a>
                        <a class="tab-item" href="#">
                            <i class="icon ion-chatbox"></i> Home
                        </a>
                        <a class="tab-item" href="#">
                            <i class="icon ion-share"></i> Add Car
                        </a>
                    </div>

                    <div class="item item-button-right">
                        Display Name <br>
                        <strong id="display-name">{{currentUser.profile.name}}</strong>
                        {{#if isAndroid}}
                            <a data-action="edit-displayName" class="button button-icon icon ion-android-create"></a>
                        {{else}}
                            <a data-action="edit-displayName" class="button button-icon icon ion-ios-compose-outline"></a>
                        {{/if}}
                    </div>

                    <div class="item item-button-right">
                        Set Status <br>
                        <strong id="status">{{currentUser.profile.status}}</strong>
                        {{#if isAndroid}}
                            <a data-action="compose-status" class="button button-icon icon ion-android-create"></a>
                        {{else}}
                            <a data-action="compose-status" class="button button-icon icon ion-ios-compose-outline"></a>
                        {{/if}}
                    </div>

                    <div class="item">
                        Points Accumulated
                        <span class="badge badge-positive">{{currentUser.profile.points}}</span>
                    </div>

                    <div class="item item-icon-left item-icon-right">
                        <i class="icon ion-email"></i>{{currentUser.registered_emails.[0].address}}
                        {{#if currentUser.registered_emails.[0].verified}}
                            <i class="icon ion-checkmark-circled positive" ></i>
                        {{else}}
                            <a href = "{{pathFor 'verifyEmail' cat='emails' index='0'}}" class="icon ion-alert-circled assertive">
                             </a>
                        {{/if}}
                    </div>
                    
                    <div class="item item-icon-left item-icon-right">
                        <i class="icon ion-briefcase"></i>
                        {{#if currentUser.works.emails.[0].address}}
                            {{currentUser.works.emails.[0].address}}
                        {{else}}
                        No Valid work email present
                        {{/if}}
                        {{#if currentUser.works.emails.[0].verified}}
                            <i class="icon ion-checkmark-circled positive"></i>
                        {{else}}
                             <a href = "{{pathFor 'verifyEmail' cat='works' index='0'}}" class="icon ion-alert-circled assertive">
                             </a>
                           
                        {{/if}}
                    </div>

                    <div class="item item-icon-left item-icon-right" >
                        <i class="icon ion-iphone"></i>
                        {{#if currentUser.mobile.[0].number}}
                            {{currentUser.mobile.[0].number}}
                        {{else}}
                        No valid mobile number found
                        {{/if}}
                         {{#if currentUser.mobile.[0].verified}}
                            <i class="icon ion-checkmark-circled positive"></i>
                        {{else}}
                                <a href = "{{pathFor 'verifyMobile' index='0'}}" class="icon ion-alert-circled assertive">
                             </a>
                        {{/if}}
                    </div>

                    <div class="item item-button-right" >
                        Sign Out
                        <a class="button button-icon icon ion-log-out" data-action="sign-out"></a>
                    </div>
                </div>
            {{/ionContent}}
        {{else}}
            {{> atForm}}
        {{/if}}
    {{/ionView}}

</template>
